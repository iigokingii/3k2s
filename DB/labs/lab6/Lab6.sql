--Creation of software license db
CREATE TABLE USERS(
  USER_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  USER_NAME NVARCHAR2(20) NOT NULL,
  USER_SURNAME NVARCHAR2(20) NOT NULL,
  USER_EMAIL NVARCHAR2(120) NOT NULL UNIQUE
);

DROP TABLE USERS;

CREATE TABLE SOFTWARE(
  SOFTWARE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  SOFTWARE_NAME NVARCHAR2(120) NOT NULL,
  SOFTWARE_VERSION NVARCHAR2(140) NOT NULL,
  SOFTWARE_COMPANY_DEVELOPER NVARCHAR2(120) NOT NULL,
  SOFTWARE_TYPE_ID NUMBER,
  FOREIGN KEY (SOFTWARE_TYPE_ID) REFERENCES SOFTWARE_TYPE(SOFTWARE_TYPE_ID)
);

CREATE TABLE SOFTWARE_TYPE(
  SOFTWARE_TYPE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  SOFTWARE_TYPE NVARCHAR2(120),
  SOFTWARE_TYPE_INFO NVARCHAR2(320),
  PRICE_ID NUMBER,
  FOREIGN KEY (PRICE_ID) REFERENCES PRICE(PRICE_ID)
);

CREATE TABLE PRICE(
  PRICE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  PRICE_MONTH NUMBER NOT NULL,
  PRICE_QUARTER NUMBER NOT NULL,
  PRICE_SIX_MONTH NUMBER NOT NULL,
  PRICE_YEAR NUMBER NOT NULL
);

CREATE TABLE LICENSES(
  LICENSE_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  SOFTWARE_ID NUMBER,
  USER_ID NUMBER,
  DATE_OF_PURCHASE NVARCHAR2(40) NOT NULL,
  EXPIRATION_DATE NVARCHAR2(40) NOT NULL
);
select * from licenses;

ALTER TABLE LICENSES ADD (LICENSE_TYPE VARCHAR2(50));